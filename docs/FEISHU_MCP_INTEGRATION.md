# 与 Feishu-MCP 集成指南

## 🎯 核心定位

### md-to-feishu：批量创建与迁移工具

**核心功能**：将 Markdown 文档批量创建/迁移到飞书

| 功能 | 说明 | 使用场景 |
|------|------|---------|
| 批量创建文档 | 一键上传整个文件夹 | 仓库文档迁移、知识库初始化 |
| 批量 Wiki 创建 | 批量创建 Wiki 知识库节点 | 构建 Wiki 知识库 |
| 表格转 Bitable | Markdown 表格转为多维表格 | 数据管理、项目追踪 |
| 性能优化 | 并行上传、连接池 | 大文档快速处理 |

**核心优势**：
- ✅ **高效批量**：一次处理整个文件夹
- ✅ **零成本**：不占用 AI token
- ✅ **快速**：直连 API，性能优化
- ✅ **可靠**：CLI 工具，可脚本化

---

### Feishu-MCP：AI 辅助编辑工具

**核心功能**：AI 辅助编辑和修改飞书文档

| 功能 | 说明 | 使用场景 |
|------|------|---------|
| AI 智能编辑 | AI 辅助修改文档内容 | 内容优化、格式调整 |
| 交互式操作 | 对话式文档操作 | 灵活编辑、即时反馈 |
| 智能摘要 | 自动生成摘要 | 文档总结、关键信息提取 |

**核心优势**：
- ✅ **智能**：AI 理解上下文
- ✅ **灵活**：交互式编辑
- ✅ **便捷**：自然语言操作

---

## 🔀 推荐工作流

### 场景 1：知识库初始化

```bash
# 第1步：使用 md-to-feishu 批量创建
uv run python scripts/batch_create_wiki_docs.py ./docs --personal

# 第2步：使用 Feishu-MCP 日常维护
# （通过 AI 对话编辑、优化内容）
```

**分工**：
- **md-to-feishu**：批量创建初始知识库
- **Feishu-MCP**：日常 AI 辅助编辑优化

---

### 场景 2：文档更新策略

| 更新类型 | 推荐工具 | 原因 |
|---------|---------|------|
| 大批量修改 | md-to-feishu（重新上传） | 批量处理效率高 |
| 局部优化 | Feishu-MCP | AI 智能修改 |
| 格式调整 | Feishu-MCP | AI 理解上下文 |
| 内容扩写 | Feishu-MCP | AI 生成内容 |

---

### 场景 3：数据管理

```bash
# 第1步：使用 md_table_to_bitable.py 转换表格
uv run python scripts/md_table_to_bitable.py data.md --auto-types

# 第2步：使用 Feishu-MCP 维护数据
# （通过 AI 对话查询、更新数据）
```

---

## 📊 功能对比表

### 完整功能对比

| 操作类型 | md-to-feishu | Feishu-MCP | 推荐方案 |
|---------|--------------|------------|---------|
| **创建/迁移** | | | |
| 批量创建文档 | ✅ 原生支持 | ⚠️ 需要脚本循环 | **md-to-feishu** |
| 批量创建 Wiki | ✅ 原生支持 | ❌ 不支持 | **md-to-feishu** |
| 批量上传文件夹 | ✅ 原生支持 | ⚠️ 需要脚本循环 | **md-to-feishu** |
| 表格转 Bitable | ✅ 专门工具 | ❌ 不支持 | **md-to-feishu** |
| **编辑/维护** | | | |
| AI 辅助编辑 | ❌ 不支持 | ✅ 核心功能 | **Feishu-MCP** |
| 智能修改 | ❌ 不支持 | ✅ 核心功能 | **Feishu-MCP** |
| 内容生成 | ❌ 不支持 | ✅ AI 生成 | **Feishu-MCP** |
| 交互式操作 | ❌ CLI 工具 | ✅ 对话式 | **Feishu-MCP** |
| **性能** | | | |
| 大文档处理 | ✅ 并行优化 (5-10x) | ⚠️ 较慢 | **md-to-feishu** |
| 批量处理 | ✅ 原生支持 | ⚠️ 需要脚本 | **md-to-feishu** |
| **成本** | | | |
| Token 使用 | ✅ 零占用 | ⚠️ 消耗 token | **md-to-feishu** |
| API 调用 | ✅ 直连 | ⚠️ MCP 中转 | **md-to-feishu** |

---

## 🔄 典型集成模式

### 模式 1：先批量创建，后 AI 维护

```
┌─────────────────┐
│  本地 Markdown    │
│  文档仓库        │
└────────┬────────┘
         │
         ▼
┌─────────────────────────┐
│  md-to-feishu            │
│  批量创建到 Wiki/云文档    │
└────────┬────────────────┘
         │
         ▼
┌─────────────────────────┐
│  飞书知识库/云文档        │
│  （已创建）              │
└────────┬────────────────┘
         │
         ▼
┌─────────────────────────┐
│  Feishu-MCP              │
│  AI 辅助编辑、维护        │
└─────────────────────────┘
```

**适用场景**：
- 初始化知识库
- 批量迁移文档
- 定期 AI 维护更新

---

### 模式 2：混合工作流

```
┌─────────────────┐     ┌───────────────────┐
│  新文档批量创建   │     │  已文档 AI 优化      │
│  md-to-feishu     │     │  Feishu-MCP        │
└─────────────────┘     └───────────────────┘
         │                         │
         ▼                         ▼
┌─────────────────────────────────────┐
│           飞书 Wiki/云文档              │
└─────────────────────────────────────┘
```

**适用场景**：
- 混合环境
- 分阶段实施

---

## 💡 使用建议

### 什么时候用 md-to-feishu？

✅ **适合使用 md-to-feishu 的场景**：

1. **批量创建/迁移**
   - 仓库文档批量上传
   - 知识库初始化
   - 多文档批量处理

2. **数据结构化**
   - Markdown 表格转 Bitable
   - 批量数据导入

3. **大文档处理**
   - 超过 token 限制的大文档
   - 需要快速批量处理

4. **成本敏感**
   - 零 AI token 消耗
   - 高频次批量操作

### 什么时候用 Feishu-MCP？

✅ **适合使用 Feishu-MCP 的场景**：

1. **内容编辑**
   - 文档内容优化
   - 格式调整
   - 语言润色

2. **智能生成**
   - AI 生成内容
   - 自动摘要提取
   - 智能推荐

3. **灵活操作**
   - 交互式编辑
   - 即时反馈
   - 复杂查询

---

## 🛠️ 技术集成

### 环境配置

两者使用**相同的环境变量**：

```bash
# .env (共享配置)
FEISHU_APP_ID=cli_xxxxx
FEISHU_APP_SECRET=xxxxx

# 可选配置
FEISHU_DEFAULT_FOLDER=fldcnxxxxx  # 默认云文件夹
```

### 工作流配置

```bash
# 1. md-to-feishu 配置
# .env 或环境变量

# 2. Feishu-MCP 配置
# (在 MCP 配置文件中指定文档 ID)
```

---

## 📚 相关文档

| 文档 | 说明 |
|------|------|
| [QUICK_START.md](QUICK_START.md) | 快速开始指南 |
| [README.md](README.md) | 主项目说明 |
| [BATCH_OPERATIONS.md](BATCH_OPERATIONS.md) | 批量操作指南 |
| [BITABLE_OPERATIONS.md](BITABLE_OPERATIONS.md) | Bitable 操作指南 |
| [PERFORMANCE_OPTIMIZATION.md](PERFORMANCE_OPTIMIZATION.md) | 性能优化指南 |
| [API_OPERATIONS.md](API_OPERATIONS.md) | API 完整参考 |

---

## 🎯 总结

### 明确分工

**md-to-feishu = 批量创建/迁移工具**
- 批量处理
- 结构化操作
- 性能优化

**Feishu-MCP = AI 辅助编辑工具**
- 智能编辑
- 灵活操作
- 交互体验

### 最佳实践

1. **创建阶段**：用 md-to-feishu 批量创建
2. **维护阶段**：用 Feishu-MCP AI 维护
3. **数据导入**：用 md-to-feishu 结构化导入
4. **内容优化**：用 Feishu-MCP AI 优化

### 互补关系

两个工具**不是竞争关系**，而是**互补协作**：
- md-to-feishu：处理"量"的问题
- Feishu-MCP：处理"质"的问题

**结合使用 = 完整的飞书文档解决方案**

---

**最后更新**: 2025-01-18
**版本**: v2.0
