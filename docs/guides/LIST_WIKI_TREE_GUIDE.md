# Wiki å±‚æ¬¡ç»“æ„é¢„è§ˆæŒ‡å— (list_wiki_tree.py)

**åˆ›å»ºæ—¥æœŸ**: 2026-01-18
**ç‰ˆæœ¬**: v0.2.1
**ç”¨é€”**: å¿«é€Ÿé¢„è§ˆ Wiki çŸ¥è¯†åº“ç»“æ„ï¼Œä¸ä¸‹è½½ä»»ä½•å†…å®¹

---

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

```bash
# æŸ¥çœ‹ä¸ªäººçŸ¥è¯†åº“
uv run python scripts/list_wiki_tree.py --personal

# æŸ¥çœ‹æŒ‡å®šç©ºé—´
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£"

# é™åˆ¶æ·±åº¦
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" -d 2

# ä»æŒ‡å®šè·¯å¾„å¼€å§‹
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" -S "/API"
```

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ… æ ‘å½¢æ˜¾ç¤º
- ä½¿ç”¨ Unicode å­—ç¬¦ç»˜åˆ¶æ ‘å½¢ç»“æ„
- æ¸…æ™°çš„å±‚æ¬¡å…³ç³»å±•ç¤º
- è‡ªåŠ¨ç¼©è¿›å¯¹é½

### âœ… å›¾æ ‡åŒºåˆ†
- ğŸ“‚ **ç›®å½•** - åŒ…å«å­èŠ‚ç‚¹
- ğŸ“„ **æ–‡æ¡£** - å¶å­èŠ‚ç‚¹ï¼ˆæ— å­èŠ‚ç‚¹ï¼‰

### âœ… çµæ´»æ§åˆ¶
- æ·±åº¦æ§åˆ¶ï¼ˆ-d å‚æ•°ï¼‰
- èµ·å§‹è·¯å¾„ï¼ˆ-S å‚æ•°ï¼‰
- è°ƒè¯•æ¨¡å¼ï¼ˆ--debugï¼‰

### âœ… é›¶å­˜å‚¨å ç”¨
- ä¸ä¸‹è½½ä»»ä½•å†…å®¹
- ä»…è¯»å–èŠ‚ç‚¹å…ƒæ•°æ®
- å¿«é€Ÿå“åº”

---

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

```
ğŸ“š Wiki Space: äº§å“æ–‡æ¡£

ğŸŒ³ Tree Structure:
============================================================
ğŸ“‚ é¦–é¡µ
ğŸ“‚ é¡¹ç›®
    â”œâ”€â”€ ğŸ“„ é¡¹ç›®æµç¨‹
    â””â”€â”€ ğŸ“„ æ ‡ä¹¦ç¡®è®¤
ğŸ“‚ APIæ–‡æ¡£
    â”œâ”€â”€ ğŸ“„ REST API
    â”œâ”€â”€ ğŸ“„ GraphQL API
    â””â”€â”€ ğŸ“‚ WebSocket
        â””â”€â”€ ğŸ“„ åè®®è¯´æ˜
ğŸ“„ README
============================================================

ğŸ“Š Total Nodes (shown): 10
```

---

## ğŸ”§ å‚æ•°è¯´æ˜

### ç©ºé—´è¯†åˆ«å‚æ•°ï¼ˆä¸‰é€‰ä¸€ï¼‰

| å‚æ•° | çŸ­é€‰é¡¹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|--------|------|------|
| `--space-name` | `-s` | Wiki ç©ºé—´åç§° | `-s "äº§å“æ–‡æ¡£"` |
| `--space-id` | - | Wiki ç©ºé—´ ID | `--space-id 74812***88644` |
| `--personal` | `-P` | ä½¿ç”¨ä¸ªäººçŸ¥è¯†åº“ | `-P` |

### å¯é€‰å‚æ•°

| å‚æ•° | çŸ­é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|--------|------|
| `--start-path` | `-S` | æ ¹è·¯å¾„ | ä»æŒ‡å®šè·¯å¾„å¼€å§‹æ˜¾ç¤º |
| `--depth` | `-d` | -1ï¼ˆæ— é™ï¼‰ | æœ€å¤§æ˜¾ç¤ºæ·±åº¦ |
| `--debug` | - | False | æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ |
| `--app-id` | - | ç¯å¢ƒå˜é‡ | é£ä¹¦åº”ç”¨ ID |
| `--app-secret` | - | ç¯å¢ƒå˜é‡ | é£ä¹¦åº”ç”¨å¯†é’¥ |

### æ·±åº¦å‚æ•°è¯´æ˜

| å€¼ | å«ä¹‰ | ç¤ºä¾‹ |
|----|------|------|
| `-1` æˆ–ä¸æŒ‡å®š | æ— é™é€’å½’ | æ˜¾ç¤ºæ‰€æœ‰å±‚çº§ |
| `0` | åªæ˜¾ç¤ºæ ¹å±‚çº§ | åªæ˜¾ç¤ºç›´æ¥å­èŠ‚ç‚¹ |
| `1` | æ˜¾ç¤º1å±‚æ·±åº¦ | æ ¹èŠ‚ç‚¹ + 1å±‚å­èŠ‚ç‚¹ |
| `2` | æ˜¾ç¤º2å±‚æ·±åº¦ | æ ¹èŠ‚ç‚¹ + 2å±‚å­èŠ‚ç‚¹ |
| `n` | æ˜¾ç¤ºnå±‚æ·±åº¦ | æ ¹èŠ‚ç‚¹ + nå±‚å­èŠ‚ç‚¹ |

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: å¿«é€Ÿäº†è§£ Wiki ç»“æ„

**éœ€æ±‚**: åˆšåŠ å…¥é¡¹ç›®ï¼Œæƒ³äº†è§£çŸ¥è¯†åº“çš„ç»„ç»‡ç»“æ„

```bash
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£"
```

**ä¼˜åŠ¿**:
- å‡ ç§’é’Ÿå†…äº†è§£æ•´ä½“ç»“æ„
- ä¸éœ€è¦ä¸‹è½½ä»»ä½•å†…å®¹
- æ¸…æ™°çš„å±‚æ¬¡å…³ç³»

### åœºæ™¯ 2: æŸ¥æ‰¾ç‰¹å®šæ–‡æ¡£è·¯å¾„

**éœ€æ±‚**: çŸ¥é“æ–‡æ¡£åç§°ï¼Œä½†ä¸çŸ¥é“å®Œæ•´è·¯å¾„

```bash
# å…ˆæŸ¥çœ‹å®Œæ•´ç»“æ„ï¼Œæ‰¾åˆ°æ–‡æ¡£ä½ç½®
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" | grep "APIè®¾è®¡"
```

### åœºæ™¯ 3: ä¸‹è½½å‰é¢„è§ˆ

**éœ€æ±‚**: ä¸‹è½½å‰ç¡®è®¤ç›®å½•ç»“æ„

```bash
# 1. å…ˆé¢„è§ˆç»“æ„
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" -S "/API"

# 2. ç¡®è®¤åä¸‹è½½
uv run python scripts/download_wiki.py -s "äº§å“æ–‡æ¡£" -S "/API" ./backup
```

### åœºæ™¯ 4: é™åˆ¶æ·±åº¦æŸ¥çœ‹

**éœ€æ±‚**: åªå…³å¿ƒé¡¶å±‚ç»“æ„ï¼Œä¸éœ€è¦æ·±å±‚ç»†èŠ‚

```bash
# åªæ˜¾ç¤º2å±‚
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" -d 2
```

### åœºæ™¯ 5: è°ƒè¯•æ¨¡å¼

**éœ€æ±‚**: æŸ¥çœ‹ API è¿”å›çš„åŸå§‹æ•°æ®

```bash
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" --debug
```

**è¾“å‡ºç¤ºä¾‹**:
```
[DEBUG] é¦–é¡µ: type=origin, has_children=None, obj_token=FhBfdDH8JoDc4TxekgRcApWEnjf
[DEBUG] é¦–é¡µ: actual_children=0, is_doc=True
ğŸ“„ é¦–é¡µ
[DEBUG] é¡¹ç›®: type=origin, has_children=None, obj_token=FRPyducOdoIKv7xHQR8cQRten14
[DEBUG] é¡¹ç›®: actual_children=2, is_doc=False
ğŸ“‚ é¡¹ç›®
```

---

## ğŸš€ é«˜çº§ç”¨æ³•

### ç»„åˆ 1: è¿‡æ»¤ç‰¹å®šèŠ‚ç‚¹

```bash
# åªæŸ¥çœ‹åŒ…å« "API" çš„èŠ‚ç‚¹
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" | grep "API"
```

### ç»„åˆ 2: ç»Ÿè®¡èŠ‚ç‚¹æ•°é‡

```bash
# ç»Ÿè®¡æ€»èŠ‚ç‚¹æ•°
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" | grep "ğŸ“Š Total Nodes"
```

### ç»„åˆ 3: å¯¼å‡ºä¸ºæ–‡ä»¶

```bash
# ä¿å­˜æ ‘å½¢ç»“æ„åˆ°æ–‡ä»¶
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" > structure.txt
```

### ç»„åˆ 4: ä¸ä¸‹è½½å·¥å…·é…åˆ

```bash
# 1. é¢„è§ˆç»“æ„
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" -S "/API" -d 1

# 2. ç¡®è®¤åä¸‹è½½
uv run python scripts/download_wiki.py -s "äº§å“æ–‡æ¡£" -S "/API" -d 1 ./api_backup
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å…ˆé¢„è§ˆï¼Œåæ“ä½œ

**æ¨èæµç¨‹**:
1. ä½¿ç”¨ `list_wiki_tree.py` é¢„è§ˆç»“æ„
2. ç¡®è®¤ç›®æ ‡è·¯å¾„å’Œå†…å®¹
3. ä½¿ç”¨ `download_doc.py` æˆ– `download_wiki.py` ä¸‹è½½

**ä¼˜åŠ¿**:
- é¿å…ä¸‹è½½ä¸éœ€è¦çš„å†…å®¹
- èŠ‚çœæ—¶é—´å’Œå¸¦å®½
- ç¡®è®¤ç›®æ ‡è·¯å¾„æ­£ç¡®

### 2. ä½¿ç”¨æ·±åº¦æ§åˆ¶

**å¤§å‹ Wiki ç©ºé—´**:
```bash
# å…ˆçœ‹é¡¶å±‚ç»“æ„ï¼ˆ-d 1ï¼‰
uv run python scripts/list_wiki_tree.py -s "å¤§å‹çŸ¥è¯†åº“" -d 1

# å†æ·±å…¥æ„Ÿå…´è¶£çš„åˆ†æ”¯
uv run python scripts/list_wiki_tree.py -s "å¤§å‹çŸ¥è¯†åº“" -S "/æ„Ÿå…´è¶£çš„åˆ†æ”¯"
```

### 3. å®šæœŸç»“æ„æ£€æŸ¥

**ç»´æŠ¤çŸ¥è¯†åº“å¥åº·**:
```bash
# å®šæœŸæ£€æŸ¥ç»“æ„å˜åŒ–
uv run python scripts/list_wiki_tree.py --personal > structure_$(date +%Y%m%d).txt

# å¯¹æ¯”å†å²ç»“æ„
diff structure_20260101.txt structure_20260118.txt
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. API è°ƒç”¨æ¬¡æ•°

- æ¯ä¸ªèŠ‚ç‚¹ä¼šè°ƒç”¨ä¸€æ¬¡ `get_wiki_node_list` API
- å¤§å‹ Wiki ç©ºé—´å¯èƒ½äº§ç”Ÿè¾ƒå¤š API è°ƒç”¨
- ä½¿ç”¨ `-d` å‚æ•°é™åˆ¶æ·±åº¦å¯ä»¥å‡å°‘è°ƒç”¨

### 2. æƒé™è¦æ±‚

- éœ€è¦å¯¹ç›®æ ‡ Wiki ç©ºé—´çš„è¯»å–æƒé™
- ä¸ªäººçŸ¥è¯†åº“ä½¿ç”¨ `-P` å‚æ•°

### 3. æ˜¾ç¤ºé™åˆ¶

- ç»ˆç«¯å®½åº¦å¯èƒ½å½±å“æ ‘å½¢æ˜¾ç¤ºæ•ˆæœ
- è¶…é•¿æ ‡é¢˜å¯èƒ½æ˜¾ç¤ºä¸å®Œæ•´
- å»ºè®®åœ¨å®½ç»ˆç«¯ä¸­ä½¿ç”¨

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: åªæ˜¾ç¤ºä¸€å±‚ç»“æ„

**åŸå› **: Wiki èŠ‚ç‚¹çš„ `has_children` å­—æ®µä¸º `None`

**è§£å†³æ–¹æ¡ˆ**:
- v0.2.1 å·²ä¿®å¤ï¼Œè‡ªåŠ¨æ£€æµ‹å­èŠ‚ç‚¹
- ç¡®ä¿ API å®¢æˆ·ç«¯ç‰ˆæœ¬æ­£ç¡®

### é—®é¢˜ 2: æ‰¾ä¸åˆ° Wiki ç©ºé—´

**é”™è¯¯ä¿¡æ¯**: `âŒ Wiki space not found: xxx`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å…ˆåˆ—å‡ºå¯ç”¨ç©ºé—´
uv run python scripts/create_wiki_doc.py --list-spaces

# ä½¿ç”¨æ­£ç¡®çš„ç©ºé—´åæˆ– ID
uv run python scripts/list_wiki_tree.py -s "æ­£ç¡®çš„ç©ºé—´å"
```

### é—®é¢˜ 3: è·¯å¾„ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯**: `âŒ Path not found: /xxx`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä¸æŒ‡å®šè·¯å¾„ï¼ŒæŸ¥çœ‹æ ¹ç»“æ„
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£"

# ä»æ ¹ç»“æ„æ‰¾åˆ°æ­£ç¡®çš„è·¯å¾„
```

---

## ğŸ”„ ä¸å…¶ä»–å·¥å…·çš„é…åˆ

### ä¸ download_doc.py é…åˆ

```bash
# 1. é¢„è§ˆç»“æ„ï¼Œæ‰¾åˆ°æ–‡æ¡£è·¯å¾„
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" | grep "APIè®¾è®¡"

# 2. ä½¿ç”¨å®Œæ•´è·¯å¾„ä¸‹è½½
uv run python scripts/download_doc.py -s "äº§å“æ–‡æ¡£" -p "/API/APIè®¾è®¡" -o api_design.md
```

### ä¸ download_wiki.py é…åˆ

```bash
# 1. é¢„è§ˆç›®å½•ç»“æ„
uv run python scripts/list_wiki_tree.py -s "äº§å“æ–‡æ¡£" -S "/API" -d 2

# 2. ç¡®è®¤åæ‰¹é‡ä¸‹è½½
uv run python scripts/download_wiki.py -s "äº§å“æ–‡æ¡£" -S "/API" -d 2 ./api_backup
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [DOWNLOAD_GUIDE.md](DOWNLOAD_GUIDE.md) - ä¸‹è½½åŠŸèƒ½å®Œæ•´æŒ‡å—
- [DOWNLOAD_SCRIPTS_COMPARISON.md](DOWNLOAD_SCRIPTS_COMPARISON.md) - å·¥å…·å¯¹æ¯”æŒ‡å—
- [UNIFIED_WIKI_PATH_SEMANTICS.md](UNIFIED_WIKI_PATH_SEMANTICS.md) - å‚æ•°è¯­ä¹‰æŒ‡å—
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - æ•…éšœæ’é™¤æŒ‡å—

---

## ğŸ“ å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹ 1: æ–°äººå¿«é€Ÿä¸Šæ‰‹

**åœºæ™¯**: æ–°å‘˜å·¥éœ€è¦å¿«é€Ÿäº†è§£å…¬å¸çŸ¥è¯†åº“ç»“æ„

**æ“ä½œ**:
```bash
# 1. æŸ¥çœ‹å®Œæ•´ç»“æ„
uv run python scripts/list_wiki_tree.py -s "å…¬å¸çŸ¥è¯†åº“"

# 2. é‡ç‚¹å…³æ³¨éƒ¨é—¨ç›¸å…³å†…å®¹
uv run python scripts/list_wiki_tree.py -s "å…¬å¸çŸ¥è¯†åº“" | grep "ç ”å‘éƒ¨"
```

### æ¡ˆä¾‹ 2: å¤‡ä»½å‰ç¡®è®¤

**åœºæ™¯**: å®šæœŸå¤‡ä»½å‰ç¡®è®¤å†…å®¹å˜åŒ–

**æ“ä½œ**:
```bash
# 1. é¢„è§ˆå½“å‰ç»“æ„
uv run python scripts/list_wiki_tree.py --personal > current.txt

# 2. ä¸ä¸Šæ¬¡å¤‡ä»½å¯¹æ¯”
diff current.txt last_backup.txt

# 3. ç¡®è®¤åå¤‡ä»½
uv run python scripts/download_wiki.py --personal ./backup_$(date +%Y%m%d)
```

### æ¡ˆä¾‹ 3: æ–‡æ¡£è¿ç§»å‰æ£€æŸ¥

**åœºæ™¯**: å°† Wiki å†…å®¹è¿ç§»åˆ°æ–°ä½ç½®å‰æ£€æŸ¥ç»“æ„

**æ“ä½œ**:
```bash
# 1. æ£€æŸ¥æºç©ºé—´ç»“æ„
uv run python scripts/list_wiki_tree.py -s "æ—§ç©ºé—´" > source.txt

# 2. æ£€æŸ¥ç›®æ ‡ç©ºé—´ç»“æ„
uv run python scripts/list_wiki_tree.py -s "æ–°ç©ºé—´" > target.txt

# 3. å¯¹æ¯”å·®å¼‚
diff source.txt target.txt
```

---

**æœ€åæ›´æ–°**: 2026-01-18
**ç‰ˆæœ¬**: v0.2.1
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
